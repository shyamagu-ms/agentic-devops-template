---
description: 'Documentation and content creation standards'
applyTo: '**/*.md'
---

## マークダウンのコンテンツルール  
1. **見出し**：コンテンツの構造には適切な見出しレベル（H2、H3 など）を使用してください。H1 は使用しないでください（タイトルから生成されます）。    
2. **リスト**：箇条書きまたは番号付きリストを使用してください。インデントと間隔を適切に保ってください。    
3. **コードブロック**：コードはフェンスされたコードブロックで記述し、シンタックスハイライト用に言語を指定してください。    
4. **リンク**：正しい Markdown 構文でリンクを記述し、有効でアクセス可能な URL を使用してください。    
5. **画像**：正しい Markdown 構文で画像を挿入し、アクセシビリティのため alt テキストを含めてください。    
6. **表**：表形式のデータは Markdown テーブルを使用し、書式と整列を適切にしてください。    
7. **行長**：可読性のため行は最大 400 文字に制限してください。    
8. **空白**：セクションを分けるために適切な空白を使用し、可読性を保ってください。    
9. **フロントマター**：ファイル先頭に YAML フロントマターを含め、必要なメタデータフィールドを記載してください。  
  
## フォーマットと構成  
- **見出し**：H2 は `##`、H3 は `###` を使用してください。見出しは階層的に使用してください。H4 が含まれる場合は再構成を推奨し、H5 がある場合はより強く推奨します。    
- **リスト**：箇条書きは `-`、番号付きは `1.` を使用してください。入れ子のリストはスペース2つでインデントしてください。    
- **コードブロック**：フェンスには三連バッククォート（```）を使い、開きの後に言語を指定してシンタックスハイライトを有効にしてください（例：`csharp`）。    
- **リンク**：`[link text](https://this.is.sampleurl)` の形式を使用してください。リンクテキストは説明的に、URL は有効であることを確認してください。    
- **画像**：`\!\[alt text\] (image URL)` の形式を使用し、alt に簡潔な説明を入れてください。    
- **表**：`|` を使ってテーブルを作成し、列の整列とヘッダーを確実にしてください。    
- **行長**：可読性向上のため 80 文字で折り返してください。長い段落にはソフト改行を使用してください。    
- **空白**：セクションは空行で区切り可読性を上げてください。過度な空白は避けてください。  
  
## 検証要件  
- **フロントマター**：YAML フロントマターに次のフィールドを含めてください：  
  - `post_title`: 投稿のタイトル  
  - `author1`: 主著者  
  - `tags`: 投稿のタグ  
  - `ai_note`: 投稿作成に AI を使用したかを示す  
  - `summary`: 投稿の簡潔な要約（可能なら内容に基づいた要約を推奨）  
  - `post_date`: 公開日  
  
- **コンテンツ規則**：上記のマークダウン規則に従っていることを確認してください。    
- **フォーマット**：ガイドラインに従って適切にフォーマット・構成されていることを確認してください。    
- **検証**：検証ツールを実行して規則とガイドラインへの準拠を確認してください。

## Mermaid記法のガイドライン

Mermaidのパースエラーを減らすために、次の点に気を付けて記述してください。

- **コードフェンス**
 - 先頭と末尾を厳密に「```mermaid」で囲む（余計な空白・BOM・不可視文字を入れない）。
 - 同じ行で閉じない。開閉の数を必ず一致させる。

- **ノードラベル（flowchart）**-
 - 形状用の括弧は外側だけに使う（id[Text], id(Text), id((Text)) など）。ラベルの中に括弧/角括弧/パイプは入れない。
 - ラベルに括弧・コロン・スラッシュ・セミコロン・縦棒などの記号を含めたい場合は必ず二重引用符で囲む（例: FN["Azure Functions<br/>TS v4"]）。
 - 改行は <br/> を使う。ラベル内の実改行は不可。

- **エッジ（flowchart）**
 - エッジのラベルはパイプ記法が最も安定（A -->|/api| B）。テキストに記号がある場合は引用符で（A -- "/api" --> B）。
 - 点線矢印は A -. "label" .-> B のように両側の . を忘れない。
 - 余計なスペースの混在（全角/半角ダッシュや長音記号）を避ける。ハイフンは半角-のみ。

- **シーケンス図**
 - 1メッセージ=1行。複数文（BEGIN; INSERT; COMMIT）は行分割する。
 - participant は先に宣言する。メッセージ中のJSONや記号はできるだけ簡素化し、必要なら引用符で包む。
 - 矢印タイプを正しく使い分ける（->, -->, ->>, -->>, x, --x, o-> など）。タイプ混在や表記揺れを避ける。

- **サブグラフ/ブロック**
 - subgraph ～ と end は対で必ず閉じる。loop/alt/opt などの制御ブロックも同様に対で閉じる。

- **文字と記号の扱い**
 - 全角ダッシュ（—、ー）や特殊ハイフンは使わない。半角-のみ使用。
 - < と > は < と > にするか、ラベル全体を引用符で囲む。
 - 絵文字や一部Unicodeはレンダラー差で失敗することがあるため避ける。

- **書式・インデント**
 - タブより半角スペース推奨。行末の余計な空白を削除。
 - 行継続やコメント（%%）は単独行で使い、行末コメントは避ける。

- **バージョン/環境差異への対処**
 - Mermaid v9/v10で挙動が異なることがあるため、曖昧な記法は避け、最小構文＋引用符で統一。

- **よくあるNG→OK**
 - NG: FN[Azure Functions (TS v4)] → OK: FN["Azure Functions<br/>TS v4"]
 - NG: FE -- /api --> FN → OK: FE -->|/api| FN（または FE -- "/api" --> FN）
 - NG: API->>SQL: BEGIN; INSERT items; COMMIT → OK: 3行に分割して送る

- **バリデーション・チェック**
 - 'get_syntax_docs', 'mermaid-diagram-validator', 'mermaid-diagram-preview' ツールを使い作成したMermaid図を検証しエラーがなくなるまで修正してください。
 